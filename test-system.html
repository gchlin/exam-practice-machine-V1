<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ç³»çµ±æ¸¬è©¦</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 800px;
      margin: 50px auto;
      padding: 20px;
      background: #f0f0f0;
    }
    .test-item {
      background: white;
      padding: 15px;
      margin: 10px 0;
      border-radius: 5px;
      border-left: 5px solid #ccc;
    }
    .test-item.pass {
      border-left-color: #4CAF50;
    }
    .test-item.fail {
      border-left-color: #f44336;
    }
    .test-item h3 {
      margin: 0 0 10px 0;
    }
    .status {
      font-weight: bold;
    }
    .pass .status {
      color: #4CAF50;
    }
    .fail .status {
      color: #f44336;
    }
    button {
      background: #2196F3;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
      margin: 5px;
    }
    button:hover {
      background: #0b7dda;
    }
    pre {
      background: #f5f5f5;
      padding: 10px;
      border-radius: 3px;
      overflow-x: auto;
      font-size: 12px;
    }
  </style>
</head>
<body>
  <h1>ğŸ”§ åˆ·é¡Œæ©Ÿç³»çµ±æ¸¬è©¦</h1>
  <p>é€™å€‹é é¢æœƒæª¢æŸ¥ç³»çµ±æ˜¯å¦èƒ½æ­£å¸¸é‹ä½œ</p>

  <div id="tests"></div>

  <hr>
  <h2>è§£æ±ºæ–¹æ¡ˆ</h2>
  <div id="solutions"></div>

  <hr>
  <h2>å¿«é€Ÿå•Ÿå‹•æœ¬åœ°ä¼ºæœå™¨</h2>
  <div style="background: white; padding: 15px; border-radius: 5px;">
    <p><strong>æ–¹æ³• 1: Python (æ¨è–¦)</strong></p>
    <pre>cd ä½ çš„è³‡æ–™å¤¾è·¯å¾‘
python -m http.server 8000
ç„¶å¾Œé–‹å•Ÿ: http://localhost:8000</pre>

    <p><strong>æ–¹æ³• 2: npx (å¦‚æœæœ‰ Node.js)</strong></p>
    <pre>cd ä½ çš„è³‡æ–™å¤¾è·¯å¾‘
npx serve
æˆ–
npx http-server</pre>
  </div>

  <script>
    const tests = [
      {
        name: 'localStorage æ”¯æ´',
        test: () => {
          try {
            localStorage.setItem('test', 'test');
            localStorage.removeItem('test');
            return { pass: true, message: 'localStorage å¯ç”¨' };
          } catch (e) {
            return { pass: false, message: 'localStorage è¢«ç¦ç”¨', error: e.message };
          }
        }
      },
      {
        name: 'FileReader API æ”¯æ´',
        test: () => {
          if (window.FileReader) {
            return { pass: true, message: 'FileReader API å¯ç”¨' };
          } else {
            return { pass: false, message: 'FileReader API ä¸æ”¯æ´' };
          }
        }
      },
      {
        name: 'ES6 Modules æ”¯æ´',
        test: () => {
          const script = document.createElement('script');
          if ('noModule' in script) {
            return { pass: true, message: 'ES6 Modules æ”¯æ´' };
          } else {
            return { pass: false, message: 'ES6 Modules ä¸æ”¯æ´' };
          }
        }
      },
      {
        name: 'æª¢æ¸¬å”è­°',
        test: () => {
          const protocol = window.location.protocol;
          if (protocol === 'http:' || protocol === 'https:') {
            return { pass: true, message: `ä½¿ç”¨ ${protocol} å”è­° âœ…` };
          } else {
            return { 
              pass: false, 
              message: `ä½¿ç”¨ ${protocol} å”è­° (å»ºè­°ä½¿ç”¨ http:// æˆ– https://)`,
              solution: 'è«‹ä½¿ç”¨æœ¬åœ°ä¼ºæœå™¨åŸ·è¡Œç³»çµ±'
            };
          }
        }
      },
      {
        name: 'Fetch API æ”¯æ´',
        test: () => {
          if (window.fetch) {
            return { pass: true, message: 'Fetch API å¯ç”¨' };
          } else {
            return { pass: false, message: 'Fetch API ä¸æ”¯æ´' };
          }
        }
      },
      {
        name: 'ç€è¦½å™¨ç‰ˆæœ¬æª¢æŸ¥',
        test: () => {
          const ua = navigator.userAgent;
          let browser = 'Unknown';
          let version = 'Unknown';
          
          if (ua.includes('Chrome/')) {
            browser = 'Chrome';
            version = ua.match(/Chrome\/(\d+)/)?.[1];
          } else if (ua.includes('Firefox/')) {
            browser = 'Firefox';
            version = ua.match(/Firefox\/(\d+)/)?.[1];
          } else if (ua.includes('Safari/') && !ua.includes('Chrome')) {
            browser = 'Safari';
            version = ua.match(/Version\/(\d+)/)?.[1];
          } else if (ua.includes('Edg/')) {
            browser = 'Edge';
            version = ua.match(/Edg\/(\d+)/)?.[1];
          }
          
          const minVersions = {
            'Chrome': 90,
            'Firefox': 88,
            'Safari': 14,
            'Edge': 90
          };
          
          const minVersion = minVersions[browser];
          const pass = !minVersion || parseInt(version) >= minVersion;
          
          return {
            pass,
            message: `${browser} ${version}${pass ? ' âœ…' : ' (å»ºè­°æ›´æ–°)'}`
          };
        }
      }
    ];

    function runTests() {
      const testsDiv = document.getElementById('tests');
      const solutionsDiv = document.getElementById('solutions');
      testsDiv.innerHTML = '';
      solutionsDiv.innerHTML = '';
      
      const solutions = [];
      
      tests.forEach(test => {
        const result = test.test();
        const div = document.createElement('div');
        div.className = `test-item ${result.pass ? 'pass' : 'fail'}`;
        
        div.innerHTML = `
          <h3>${test.name}</h3>
          <div class="status">${result.pass ? 'âœ… é€šé' : 'âŒ å¤±æ•—'}</div>
          <div>${result.message}</div>
          ${result.error ? `<pre>éŒ¯èª¤: ${result.error}</pre>` : ''}
        `;
        
        testsDiv.appendChild(div);
        
        if (!result.pass && result.solution) {
          solutions.push({
            test: test.name,
            solution: result.solution
          });
        }
      });
      
      // é¡¯ç¤ºè§£æ±ºæ–¹æ¡ˆ
      if (solutions.length > 0) {
        solutions.forEach(s => {
          const div = document.createElement('div');
          div.style.cssText = 'background: #fff3cd; padding: 15px; margin: 10px 0; border-radius: 5px; border-left: 5px solid #ffc107;';
          div.innerHTML = `
            <h3>âš ï¸ ${s.test}</h3>
            <p>${s.solution}</p>
          `;
          solutionsDiv.appendChild(div);
        });
      } else {
        solutionsDiv.innerHTML = '<div style="background: #d4edda; padding: 15px; border-radius: 5px; border-left: 5px solid #28a745;"><strong>ğŸ‰ æ‰€æœ‰æ¸¬è©¦é€šéï¼ç³»çµ±æ‡‰è©²å¯ä»¥æ­£å¸¸é‹ä½œã€‚</strong></div>';
      }
    }

    // åŸ·è¡Œæ¸¬è©¦
    runTests();
  </script>
</body>
</html>
