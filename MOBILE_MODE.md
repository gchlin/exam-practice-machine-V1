# 手機操作模式說明

## 改善項目總覽

本次更新完整重構了手機操作介面，解決了手機無實體鍵盤的操作問題。

## 主要改善

### 1. **自動偵測手機裝置**
- 自動識別 iPhone、iPad、iPod、Android 裝置
- 螢幕寬度 < 768px 時自動啟用手機模式
- 響應式調整：視窗縮放時自動切換模式

### 2. **固定底部操作列**（練習頁面）
手機模式下，練習頁面底部會出現大型觸控友善的操作列：

#### 快速操作區
- **← 按鈕**：上一題
- **顯示解答 按鈕**：切換解答顯示/隱藏
- **→ 按鈕**：下一題

#### 主要作答區
- **✓ 正確**：綠色按鈕，標記答對
- **✗ 錯誤**：紅色按鈕，標記答錯
- **⊘ 跳過**：灰色按鈕，跳過此題

#### 難度評分區
- **5 顆大型星星**：點擊評分 1-5 星
- 點擊後星星變色，即時反饋

### 3. **手勢操作支援**
- **左滑**：切換到下一題
- **右滑**：切換到上一題
- 滑動閾值：50px（避免誤觸）

### 4. **預測頁面優化**
- 星星按鈕放大至 50-52px
- 加大間距，避免誤觸
- 按鈕最小高度 48-50px

### 5. **版面自適應**
- 自動隱藏桌面版控制區域
- 練習頁面底部預留 200-220px 空間
- 避免內容被固定操作列遮擋

## 技術實作

### HTML 結構
```html
<div class="mobile-action-bar" id="mobile-action-bar">
  <div class="mobile-quick-actions">
    <!-- 左/右切換 + 顯示解答 -->
  </div>
  <div class="mobile-main-actions">
    <!-- 正確/錯誤/跳過 -->
  </div>
  <div class="mobile-difficulty">
    <!-- 5 顆星評分 -->
  </div>
</div>
```

### CSS 樣式
- **Win98 風格**：經典按鈕效果（outset/inset border）
- **Pastel 風格**：圓角漸層按鈕 + 毛玻璃效果
- 按鈕最小高度：52-54px（符合觸控規範）
- 固定定位：`position: fixed; bottom: 0; z-index: 999;`

### JavaScript 邏輯
- **自動偵測**：`initMobileMode()` 在頁面載入時執行
- **事件綁定**：`bindMobileEvents()` 綁定所有手機按鈕
- **狀態同步**：桌面版和手機版按鈕狀態即時同步
- **手勢處理**：使用 `touchstart` + `touchend` 事件

## 使用方式

### 自動啟用
在以下情況自動啟用手機模式：
1. 使用手機瀏覽器開啟（偵測 User Agent）
2. 瀏覽器視窗寬度 < 768px

### 手動切換
如需關閉自動模式：
```javascript
// 在瀏覽器 Console 執行
document.body.classList.remove('mobile-mode');
```

## 相容性

### 支援的裝置
- ✅ iPhone (Safari)
- ✅ iPad (Safari)
- ✅ Android 手機 (Chrome)
- ✅ Android 平板 (Chrome)
- ✅ 桌面瀏覽器縮小視窗

### 觸控手勢
- ✅ 點擊
- ✅ 滑動（Swipe）
- ❌ 長按（未實作）
- ❌ 捏合縮放（圖片使用點擊放大）

## 優勢對比

### 改善前
❌ 依賴鍵盤快捷鍵（手機無法使用）
❌ 按鈕過小，容易誤觸
❌ 需要滾動才能看到控制按鈕
❌ 星星評分區域小，難以點擊

### 改善後
✅ 完全不需鍵盤，純觸控操作
✅ 大型按鈕（52-54px），易於點擊
✅ 固定底部操作列，隨時可見
✅ 大型星星按鈕（50-52px），精準評分
✅ 支援滑動手勢，快速切換題目

## 未來改善方向

1. **震動反饋**：按鈕點擊時觸發震動
2. **語音輸入**：筆記支援語音轉文字
3. **手勢設定**：自訂滑動方向和動作
4. **快捷工具列**：可自訂常用功能
5. **橫向模式**：針對平板橫向顯示優化

## 檔案變更清單

### 新增
- `MOBILE_MODE.md` - 本說明文件

### 修改
- `index.html` - 新增 `.mobile-action-bar` 操作列
- `style-win98.css` - 新增手機模式樣式
- `style-pastel.css` - 新增手機模式樣式
- `app.js` - 新增 `initMobileMode()` 等函數

## 測試建議

### 模擬器測試
```bash
# Chrome DevTools
1. 按 F12 開啟開發者工具
2. 點擊 Toggle Device Toolbar (Ctrl+Shift+M)
3. 選擇裝置：iPhone 12 Pro / Galaxy S20
4. 重新載入頁面
```

### 真機測試
1. 將專案部署到本地伺服器
2. 使用手機瀏覽器開啟
3. 測試所有操作按鈕
4. 測試滑動手勢

## 效能考量

- 操作列使用 `position: fixed`，不影響主內容滾動效能
- 手勢事件使用 `{ passive: true }`，避免阻塞滾動
- 按鈕樣式使用 CSS 動畫，GPU 加速
- 狀態同步最小化 DOM 操作

## 更新日期

2025-12-05
